---
import Button from '../ui/Button.astro';

interface Props {
  commune: any;
}

const { commune } = Astro.props;

// Titre dynamique basé sur la population
function getHeroTitle(commune: any): string {
  if (commune.population > 100000) {
    return `Votre Plombier Basé à ${commune.name}`;
  } else if (commune.population > 20000) {
    return `Plombier Local à ${commune.name}`;
  } else {
    return `Votre Artisan Plombier à ${commune.name}`;
  }
}

const title = getHeroTitle(commune);
const postalCode = commune.postalCodes[0] || '';
---

<section class="relative bg-primary-700 text-white py-20 md:py-28 border-b-4 border-primary-800">
  <div class="container mx-auto">
    <div class="max-w-3xl">
      <h1 class="text-4xl md:text-5xl lg:text-6xl font-bold mb-6">
        {title}
      </h1>
      <p class="text-xl md:text-2xl mb-4 text-primary-100">
        Artisan installé à {commune.name} ({postalCode})
      </p>
      <p class="text-lg mb-8 text-primary-200">
        Intervention rapide chez vous et dans les communes voisines. Dépannage, fuite d'eau, débouchage, installation.
      </p>

      <div class="flex flex-col sm:flex-row gap-4">
        <Button variant="emergency" size="lg" href="tel:0758239126">
          07.58.23.91.26
        </Button>
        <Button variant="secondary" size="lg" href="#services" class="bg-white text-primary-600 hover:bg-gray-100">
          Nos Services
        </Button>
      </div>

      <!-- Trust badges -->
      <div class="mt-10 flex flex-wrap items-center gap-4 text-sm">
        <div class="flex items-center gap-3 bg-primary-800 px-4 py-3 border-l-4 border-white">
          <span class="font-black uppercase tracking-widest">Basé à {commune.name}</span>
        </div>
        <div class="flex items-center gap-3 bg-primary-800 px-4 py-3 border-l-4 border-success-500">
          <span class="font-black uppercase tracking-widest">Devis gratuit</span>
        </div>
        <div class="flex items-center gap-3 bg-primary-800 px-4 py-3 border-l-4 border-white">
          <span class="font-black uppercase tracking-widest">7h30-18h</span>
        </div>
        <div class="flex items-center gap-3 bg-primary-800 px-4 py-3 border-l-4 border-accent-500">
          <span class="font-black uppercase tracking-widest">Urgence 24/7</span>
        </div>
      </div>
    </div>
  </div>
</section>
